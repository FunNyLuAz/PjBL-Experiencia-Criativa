{% extends "template.html" %}

{% import "utils/page_macros.html" as page_macros %}
{% import "utils/form_macros.html" as form_macros %}

{% block title %}
<title>Gerenciador de pagamentos</title>
{% endblock %}

{% block content %}
<div class="container">
    {{ page_macros.flash_verifier() }}

    {{ form_macros.formdivrow_start("payment_manager", col_size="6") }}

        {{ form_macros.title("Gerenciador de pagamentos") }}
                <div class="row my-4">
                    <div class="col mx-4">
                        {% if cards|length > 0 %}
                            <ul>
                            {% for k, v in cards|items %}
                                {% for card in v %}
                                    <li><span class="del" onclick="deleteCard('{{ card[0] }}')">X</span> | Usuário: {{ k }}; Nome do titular: {{ card[1] }}, ID do cartão: {{ card[2] }}, Data de vencimento: {{ card[3] }}, CVV: {{ card[4] }}</li>
                                {% endfor %}
                            {% endfor %}
                            </ul>
                        {% else %}
                            <span>Não há pagamentos cadastrados.</span>
                        {% endif %}
                    </div>
                </div>
        {{ form_macros.br() }}

        {{ form_macros.form_start("form", "add_card") }}

            {{ form_macros.subtitle("Cadastro de cartão de crédito") }}
            {{ form_macros.input("Número de cartão de crédito", id="card_num_card", name="card_num_card", type="text", extra_params="maxlength=16") }}
            {{ form_macros.input("Nome do titular", id="card_name_owner", name="card_name_owner", type="text") }}
            {{ form_macros.input("CVV", id="card_cvv", name="card_cvv", type="text", extra_params="maxlength=3") }}
            {{ form_macros.input("Data de validade", id="card_expire_date", name="card_expire_date", type="month") }}

            {{ form_macros.button(label='Cadastrar usuário') }}

            {{ form_macros.br() }}

        {{ form_macros.form_end() }}

    {{ form_macros.formdivrow_end() }}

    {{ page_macros.endbutton("Gerenciador de usuários", "goTo('/auth/users_manager')") }}

    {{ page_macros.endlabel("Voltar ao início", "/", is_link=true) }}
</div>
{% endblock %}
